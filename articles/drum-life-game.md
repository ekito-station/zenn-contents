---
title: "Drum Life Gameé–‹ç™ºãƒ¡ãƒ¢"
emoji: "ğŸ¥"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["unity", "csharp", "å€‹äººé–‹ç™º"]
published: true
---
# ã¯ã˜ã‚ã«
Drum Life Gameã¨ã„ã†éŸ³æ¥½æ¼”å¥ã‚¢ãƒ—ãƒªã‚’åˆ¶ä½œã—ã¾ã—ãŸã€‚ãƒ©ã‚¤ãƒ•ã‚²ãƒ¼ãƒ ã®ãƒ«ãƒ¼ãƒ«ã«åŸºã¥ã„ã¦ãƒ‰ãƒ©ãƒ ã®æ¼”å¥ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒå¤‰åŒ–ã—ã¾ã™ã€‚æœ¬è¨˜äº‹ã§ã¯ã€ã‚¢ãƒ—ãƒªã®é–‹ç™ºéç¨‹ã«ã¤ã„ã¦ãƒ¡ãƒ¢ã—ã¾ã™ï¼ˆèª¬æ˜ã®ãŸã‚ã«ä¸€éƒ¨ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ã¦ã„ã¾ã™ï¼‰ã€‚
https://youtu.be/IZWCfksDZnE

### Drum Life Game
iOS ver.
@[card](https://apps.apple.com/jp/app/drum-life-game/id1669654073)
Android ver.
@[card](https://play.google.com/store/apps/details?id=com.ekito_station.DrumLifeGame)

# é–‹ç™ºéç¨‹

### 1. ã‚»ãƒ«ã‚’ä¸¦ã¹ã‚‹
ä¸‹å›³ã®ã‚ˆã†ã«ã€ã‚»ãƒ«ã®è¡Œåˆ—ã‚’ä½œã‚Šã¾ã™ã€‚è¡Œã¯ãƒ‰ãƒ©ãƒ ã®å„ãƒ‘ãƒ¼ãƒˆï¼ˆã‚­ãƒƒã‚¯ãƒ»ã‚¹ãƒã‚¢ãªã©ï¼‰ã€åˆ—ã¯å„æ‹ï¼ˆä¾‹: BEAT0 = 1æ‹ç›®ï¼‰ã‚’æ„å‘³ã—ã¾ã™ã€‚
![](/images/drum-life-game/image1.png)

ã‚»ãƒ«ã«ã¯Imageã‚’ä½¿ç”¨ã—ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯Colorã‚’é»’è‰²ã«è¨­å®šã—ã¾ã™ã€‚ã‚»ãƒ«ã«AudioSourceã‚’ã‚¢ã‚¿ãƒƒãƒã—ã€ã‚»ãƒ«ãŒå­˜åœ¨ã™ã‚‹è¡Œã«å¿œã˜ã¦è©²å½“ã™ã‚‹ãƒ‘ãƒ¼ãƒˆã®éŸ³ã‚’AudioClipã«è¨­å®šã—ã¾ã™ã€‚

ã‚ã¨ã§åˆ—ã”ã¨ã«éŸ³ã‚’å†ç”Ÿã•ã›ã‚‹ãŸã‚ã«ä¸‹å›³ã®ã‚ˆã†ã«ã€1åˆ—åˆ†ã®ã‚»ãƒ«ã‚’ã¾ã¨ã‚ã¦1ã¤ã®ç©ºã®GameObjectï¼ˆä¸‹å›³ã§ã¯BEAT0ï¼‰ã®å­ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«è¨­å®šã—ã¾ã™ã€‚
![](/images/drum-life-game/image2.png)

### 2. ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã‚»ãƒ«ã®ON/OFFã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹
ã‚»ãƒ«ã«ã¯ONã®çŠ¶æ…‹ã¨OFFã®çŠ¶æ…‹ãŒã‚ã‚Šã€ONã®çŠ¶æ…‹ã®ã‚»ãƒ«ã‹ã‚‰éŸ³ãŒé³´ã‚Šã¾ã™ã€‚
ã‚»ãƒ«ã®è‰²ãŒé»’ã®å ´åˆã¯OFFã®çŠ¶æ…‹ã§ã€ç™½ã®å ´åˆã¯ONã®çŠ¶æ…‹ã‚’æ„å‘³ã—ã¾ã™ã€‚

ã‚»ãƒ«ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã‚‹ã¨ã€é»’è‰²ï¼ˆOFFã®çŠ¶æ…‹ï¼‰ã®ã‚»ãƒ«ã¯ç™½è‰²ï¼ˆONã®çŠ¶æ…‹ï¼‰ã«ã€ç™½è‰²ã®ã‚»ãƒ«ã¯é»’è‰²ã«ãªã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚
ä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆNoteControllerï¼‰ã‚’ã‚»ãƒ«ã«ã‚¢ã‚¿ãƒƒãƒã—ã¾ã™ã€‚
```csharp:NoteController.cs
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;

public class NoteController : MonoBehaviour
{
    public Image image;             // ã‚»ãƒ«ã«ã‚¢ã‚¿ãƒƒãƒã•ã‚Œã¦ã„ã‚‹Imageã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
    [System.NonSerialized]
    public bool isPlayed = false;   // trueãªã‚‰ONã®çŠ¶æ…‹ã€falseãªã‚‰OFFã®çŠ¶æ…‹

    public void OnCellClicked()     // ã‚»ãƒ«ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã«å®Ÿè¡Œã•ã‚Œã‚‹é–¢æ•°
    {
        if (isPlayed)   // å…ƒã€…ONã®çŠ¶æ…‹ã®å ´åˆ
        {
            image.color = Color.black;  // é»’è‰²ã«ã™ã‚‹         
            isPlayed = false;           // OFFã®çŠ¶æ…‹ã«ã™ã‚‹
        }
        else            // å…ƒã€…OFFã®çŠ¶æ…‹ã®å ´åˆ
        {
            image.color = Color.white;  // ç™½è‰²ã«ã™ã‚‹           
            isPlayed = true;            // ONã®çŠ¶æ…‹ã«ã™ã‚‹
        }
    }
}
```
ãã—ã¦ã€ã‚»ãƒ«ã«Buttonã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ã‚¢ã‚¿ãƒƒãƒã—ä¸Šè¨˜ã®OnCellClicked()ã‚’OnClickã«ç™»éŒ²ã—ã¾ã™ã€‚

### 3. å·¦ã®åˆ—ã‹ã‚‰é †ç•ªã«éŸ³ã‚’å†ç”Ÿã•ã›ã‚‹
ç”»é¢ä¸‹ã®PLAYãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã‚‹ã¨ã€å·¦ã®åˆ—ã‹ã‚‰å³ã«å‘ã‹ã£ã¦é †ç•ªã«éŸ³ãŒå†ç”Ÿã•ã‚Œã¾ã™ã€‚
åˆ—ã®ä¸­ã§ç™½è‰²ã®ã‚»ãƒ«ã‹ã‚‰ã®ã¿éŸ³ãŒé³´ã‚Šã¾ã™ã€‚
![](/images/drum-life-game/image3.png)

ã¾ãšã€NoteControllerã«ä»¥ä¸‹ã®é–¢æ•°ã‚’è¿½åŠ ã—ã¾ã™ã€‚
è‡ªã‚‰ãŒå­˜åœ¨ã™ã‚‹åˆ—ã®å†ç”Ÿã•ã‚Œã‚‹é †ç•ªãŒæ¥ãŸã¨ãã«ã€OFFã®çŠ¶æ…‹ã®ã‚»ãƒ«ã¯èŒ¶è‰²ã«ãªã‚Šã€ONã®çŠ¶æ…‹ã®ã‚»ãƒ«ã¯ãƒ™ãƒ¼ã‚¸ãƒ¥è‰²ã«ãªã‚‹ã¨ã¨ã‚‚ã«éŸ³ã‚’é³´ã‚‰ã—ã¾ã™ã€‚æ¬¡ã®åˆ—ã®å†ç”Ÿã•ã‚Œã‚‹é †ç•ªã«ãªã£ãŸã‚‰ï¼ˆ0.3ç§’å¾Œï¼‰ã€è‰²ã‚’å…ƒã«æˆ»ã—ã¾ã™ã€‚
```csharp:NoteController.cs
    public AudioSource audioSource;
    public AudioClip audioClip;

    public void PlayNote()
    {
        if (isPlayed)   // ONã®çŠ¶æ…‹ãªã‚‰
        {
            // éŸ³ã‚’é³´ã‚‰ã™
            audioSource.PlayOneShot(audioClip);
            // è‰²ã‚’å¤‰ãˆã‚‹
            Color _colorPlayed;
            if (ColorUtility.TryParseHtmlString("#eedcb3", out _colorPlayed))
                image.color = _colorPlayed;     // ãƒ™ãƒ¼ã‚¸ãƒ¥è‰²ã«ã™ã‚‹
        }
        else    // OFFã®çŠ¶æ…‹ãªã‚‰
        {
            // è‰²ã‚’å¤‰ãˆã‚‹
            Color _colorNotPlayed;
            if (ColorUtility.TryParseHtmlString("#6c3524", out _colorNotPlayed))
                image.color = _colorNotPlayed;  // èŒ¶è‰²ã«ã™ã‚‹
        }
        Invoke("ReturnColor", 0.3f);    // 0.3ç§’å¾Œã«è‰²ã‚’æˆ»ã™
    }

    private void ReturnColor()
    {
        if (isPlayed)ã€€image.color = Color.white;   // ONã®çŠ¶æ…‹ãªã‚‰ç™½è‰²ã«æˆ»ã™
        elseã€€image.color = Color.black;            // OFFã®çŠ¶æ…‹ãªã‚‰é»’è‰²ã«æˆ»ã™
    }
```
æ¬¡ã«ã€å„åˆ—ã§ã‚»ãƒ«ã®PlayNote()ã‚’åŒæ™‚ã«å®Ÿè¡Œã™ã‚‹ãŸã‚ã«ã€UnityEventã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
å„åˆ—ã®ã‚»ãƒ«ã‚’ã¾ã¨ã‚ã¦ã„ã‚‹ç©ºã®GameObjectï¼ˆ1ã§èª¬æ˜ã—ãŸBEAT0ã®ã‚ˆã†ãªGameObjectï¼‰ã«ä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆBeatControllerï¼‰ã‚’ã‚¢ã‚¿ãƒƒãƒã—ã¾ã™ã€‚
```csharp:BeatController.cs
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.Events;

public class BeatController : MonoBehaviour
{
    public UnityEvent noteEvent = new UnityEvent();

    public void PlayNotes()
    {
        noteEvent.Invoke();
    }
}
```
ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ä¸Šã§ã€UnityEventã«ãã®åˆ—ã®å„ã‚»ãƒ«ã®PlayNote()ã‚’è¿½åŠ ã—ã¾ã™ã€‚
![](/images/drum-life-game/image4.png)

ãã—ã¦ã€ã‚·ãƒ¼ãƒ³ä¸Šã«æ–°ãŸã«ä½œæˆã—ãŸç©ºã®GameObjectã«ã€ä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆLifeGameManagerï¼‰ã‚’ã‚¢ã‚¿ãƒƒãƒã—ã¾ã™ã€‚
```csharp:LifeGameManager.cs
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class LifeGameManager : MonoBehaviour
{
    public BeatController[] beats;

    private IEnumerator PlayBeats() // åˆ—ã‚’é †ç•ªã«å†ç”Ÿã™ã‚‹ã‚³ãƒ«ãƒ¼ãƒãƒ³
    {
        while (true)
        {
            foreach (BeatController beat in beats)
            {
                beat.PlayNotes();                       // 1ã¤ã®åˆ—ã‚’å†ç”Ÿã™ã‚‹
                yield return new WaitForSeconds(0.3f);  // æ¬¡ã®åˆ—ã®å†ç”Ÿã¾ã§0.3ç§’å¾…ã¤
            }
        }
    }
}
```
ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ä¸Šã§ã€beatsã¨ã„ã†ãƒªã‚¹ãƒˆã«å„åˆ—ã®BeatControllerã‚’è¿½åŠ ã—ã¾ã™ã€‚
![](/images/drum-life-game/image5.png)

ã“ã‚Œã«ã‚ˆã£ã¦ã€LifeGameManagerã®PlayBeats()ã‚’å®Ÿè¡Œã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªæµã‚Œã§éŸ³ãŒå†ç”Ÿã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
1. å„åˆ—ã®BeatControllerã®PlayNotes()ãŒå®Ÿè¡Œã•ã‚Œã‚‹
2. ãã®åˆ—ã®å„ã‚»ãƒ«ã®NoteControllerã®PlayNote()ãŒå®Ÿè¡Œã•ã‚Œã‚‹
3. ãã®ã‚»ãƒ«ã®çŠ¶æ…‹ã«å¿œã˜ã¦ã‚»ãƒ«ã®è‰²ãŒå¤‰åŒ–ã—éŸ³ãŒé³´ã‚‹

### 4. ãƒ©ã‚¤ãƒ•ã‚²ãƒ¼ãƒ ã®è¦é ˜ã§ã€ã‚»ãƒ«ã®ON/OFFã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å¤‰åŒ–ã•ã›ã‚‹
ã“ã“ã§ã€ãƒ©ã‚¤ãƒ•ã‚²ãƒ¼ãƒ ã®ãƒ«ãƒ¼ãƒ«ã«ã¤ã„ã¦ç°¡å˜ã«èª¬æ˜ã—ã¾ã™ã€‚
![](/images/drum-life-game/image6.png)
ãƒ»ï¼ˆèª•ç”Ÿï¼‰ONã®çŠ¶æ…‹ã®ã‚»ãƒ«3ã¤ã«å›²ã¾ã‚ŒãŸOFFã®çŠ¶æ…‹ã®ã‚»ãƒ«ã¯ã€ONã®çŠ¶æ…‹ã«åˆ‡ã‚Šæ›¿ã‚ã‚Šã¾ã™ã€‚
ãƒ»ï¼ˆç¶­æŒï¼‰ONã®çŠ¶æ…‹ã®ã‚»ãƒ«2ã¤or3ã¤ã«å›²ã¾ã‚ŒãŸONã®çŠ¶æ…‹ã®ã‚»ãƒ«ã¯ã€ONã®çŠ¶æ…‹ã®ã¾ã¾ã§ã™ã€‚
ãƒ»ãã‚Œä»¥å¤–ã®ã‚»ãƒ«ã¯ã€OFFã®çŠ¶æ…‹ã«ãªã‚Šã¾ã™ã€‚

ã“ã®ãƒ«ãƒ¼ãƒ«ã«åŸºã¥ã„ã¦ã€åˆ—ã®å†ç”ŸãŒä¸€å‘¨ã—ãŸã‚‰å„ã‚»ãƒ«ã®ON/OFFã®çŠ¶æ…‹ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚
ã¾ãšã€å„åˆ—ã®BeatControllerã«NoteControllerã®ãƒªã‚¹ãƒˆã‚’ä½œã‚Šã€ãã®åˆ—ã®ã‚»ãƒ«ã®NoteControllerã‚’ã™ã¹ã¦è¿½åŠ ã—ã¾ã™ã€‚
```csharp:BeatController.cs
    public NoteController[] notes;
```
![](/images/drum-life-game/image7.png)
æ¬¡ã«ã€å„ã‚»ãƒ«ã®NoteControllerã«ã€å‘¨å›²ã«ã‚ã‚‹ONã®çŠ¶æ…‹ã®ã‚»ãƒ«ã®æ•°ã‚’ä¿å­˜ã™ã‚‹ãŸã‚ã®å¤‰æ•°ï¼ˆcountï¼‰ã‚’ä½œã‚Šã¾ã™ã€‚
```csharp:NoteController.cs
    [System.NonSerialized]
    public int count = 0;
```
ãã—ã¦ã€LifeGameManagerã«ä»¥ä¸‹ã®é–¢æ•°ã‚’è¿½åŠ ã—ã¾ã™ã€‚
```csharp:LifeGameManager.cs
    private IEnumerator PlayBeats()
    {
        while (true)
        {
            foreach (BeatController beat in beats)
            {
                beat.PlayNotes();
                yield return new WaitForSeconds(0.3f);
            }
            // ä»¥ä¸‹ã®å‡¦ç†ã‚’è¿½åŠ 
            NextLife(); // åˆ—ã®å†ç”ŸãŒä¸€å‘¨ã—ãŸã‚‰å®Ÿè¡Œ
        }
    }
    public void NextLife()
    {
        CountLife();    // å„ã‚»ãƒ«ã®å‘¨å›²ã«ã‚ã‚‹ONã®çŠ¶æ…‹ã®ã‚»ãƒ«ã‚’æ•°ãˆã‚‹é–¢æ•°
        ChangeLife();   // å„ã‚»ãƒ«ã®ON/OFFã®çŠ¶æ…‹ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹é–¢æ•°
    }
```
CountLife()ã§ã¯ã€å‘¨å›²ã«ã‚ã‚‹ONã®çŠ¶æ…‹ã®ã‚»ãƒ«ã®æ•°ã‚’ã‚»ãƒ«ã”ã¨ã«è¨ˆç®—ã—ã¦countã«ä¿å­˜ã—ã¾ã™ã€‚
```csharp:LifeGameManager.cs
    private void CountLife()
    {
        for (int x = 0; x < beats.Length; x++)
        {
            if (x == 0) // ä¸€ç•ªå·¦ã®åˆ—ï¼ˆBEAT0ï¼‰
            {
                NoteController[] _notes = beats[x].notes;       // ãã®åˆ—ï¼ˆBEAT0ï¼‰ã®NoteControllerã®ãƒªã‚¹ãƒˆ
                NoteController[] _nextNotes = beats[x+1].notes; // å³ã®åˆ—ï¼ˆBEAT1ï¼‰ã®NoteControllerã®ãƒªã‚¹ãƒˆ

                for (int y = 0; y < _notes.Length; y++)
                {
                    // å‘¨å›²ã®ONã®çŠ¶æ…‹ã®ã‚»ãƒ«ã‚’æ•°ãˆã‚‹
                    if (_nextNotes[y].isPlayed) _notes[y].count++;          // å³ã®ã‚»ãƒ«ãŒONã®çŠ¶æ…‹ãªã‚‰countã‚’1å¢—ã‚„ã™ 

                    if (y != 0) // ä¸€ç•ªä¸Šã®è¡Œä»¥å¤–ã®ã‚»ãƒ«ãªã‚‰
                    { 
                        if (_notes[y-1].isPlayed) _notes[y].count++;        // ä¸Šã®ã‚»ãƒ«ãŒONã®çŠ¶æ…‹ãªã‚‰countã‚’1å¢—ã‚„ã™
                        if (_nextNotes[y-1].isPlayed) _notes[y].count++;    // å³ä¸Šã®ã‚»ãƒ«ãŒONã®çŠ¶æ…‹ãªã‚‰countã‚’1å¢—ã‚„ã™
                    if (y != _notes.Length - 1) // ä¸€ç•ªä¸‹ã®è¡Œä»¥å¤–ã®ã‚»ãƒ«ãªã‚‰
                    { 
                        if (_notes[y+1].isPlayed) _notes[y].count++;        // ä¸‹ã®ã‚»ãƒ«ãŒONã®çŠ¶æ…‹ãªã‚‰countã‚’1å¢—ã‚„ã™
                        if (_nextNotes[y+1].isPlayed) _notes[y].count++;    // å³ä¸‹ã®ã‚»ãƒ«ãŒONã®çŠ¶æ…‹ãªã‚‰countã‚’1å¢—ã‚„ã™
                    }                                       
                }                
            }
            else if (x == beats.Length - 1) // ä¸€ç•ªå³ã®åˆ—ï¼ˆBEAT15ï¼‰
            {
                NoteController[] _prevNotes = beats[x-1].notes; // å·¦ã®åˆ—ï¼ˆBEAT14ï¼‰ã®NoteControllerã®ãƒªã‚¹ãƒˆ
                NoteController[] _notes = beats[x].notes;       // ãã®åˆ—ï¼ˆBEAT15ï¼‰ã®NoteControllerã®ãƒªã‚¹ãƒˆ

                for (int y = 0; y < _notes.Length; y++)
                {
                    // å‘¨å›²ã®ONã®çŠ¶æ…‹ã®ã‚»ãƒ«ã‚’æ•°ãˆã‚‹
                    if (_prevNotes[y].isPlayed) _notes[y].count++;          // å·¦ã®ã‚»ãƒ«ãŒONã®çŠ¶æ…‹ãªã‚‰countã‚’1å¢—ã‚„ã™
                    
                    if (y != 0) // ä¸€ç•ªä¸Šã®è¡Œä»¥å¤–ã®ã‚»ãƒ«ãªã‚‰
                    {
                        if (_prevNotes[y-1].isPlayed) _notes[y].count++;    // å·¦ä¸Šã®ã‚»ãƒ«ãŒONã®çŠ¶æ…‹ãªã‚‰countã‚’1å¢—ã‚„ã™
                        if (_notes[y-1].isPlayed) _notes[y].count++;        // ä¸Šã®ã‚»ãƒ«ãŒONã®çŠ¶æ…‹ãªã‚‰countã‚’1å¢—ã‚„ã™
                    }
                    if (y != _notes.Length - 1) // ä¸€ç•ªä¸‹ã®è¡Œä»¥å¤–ã®ã‚»ãƒ«ãªã‚‰
                    {
                        if (_prevNotes[y+1].isPlayed) _notes[y].count++;    // å·¦ä¸‹ã®ã‚»ãƒ«ãŒONã®çŠ¶æ…‹ãªã‚‰countã‚’1å¢—ã‚„ã™  
                        if (_notes[y+1].isPlayed) _notes[y].count++;        // ä¸‹ã®ã‚»ãƒ«ãŒONã®çŠ¶æ…‹ãªã‚‰countã‚’1å¢—ã‚„ã™
                    }                                       
                }                
            }
            else    // BEAT0ãƒ»BEAT15ä»¥å¤–ã®åˆ—
            {
                NoteController[] _prevNotes = beats[x-1].notes; // å·¦ã®åˆ—ã®NoteControllerã®ãƒªã‚¹ãƒˆ
                NoteController[] _notes = beats[x].notes;       // ãã®åˆ—ã®NoteControllerã®ãƒªã‚¹ãƒˆ
                NoteController[] _nextNotes = beats[x+1].notes; // å³ã®åˆ—ã®NoteControllerã®ãƒªã‚¹ãƒˆ

                for (int y = 0; y < _notes.Length; y++)
                {
                    // å‘¨å›²ã®ONã®çŠ¶æ…‹ã®ã‚»ãƒ«ã‚’æ•°ãˆã‚‹
                    if (_prevNotes[y].isPlayed) _notes[y].count++;          // å·¦ã®ã‚»ãƒ«ãŒONã®çŠ¶æ…‹ãªã‚‰countã‚’1å¢—ã‚„ã™
                    if (_nextNotes[y].isPlayed) _notes[y].count++;          // å³ã®ã‚»ãƒ«ãŒONã®çŠ¶æ…‹ãªã‚‰countã‚’1å¢—ã‚„ã™

                    if (y != 0) // ä¸€ç•ªä¸Šã®è¡Œä»¥å¤–ã®ã‚»ãƒ«ãªã‚‰
                    {
                        if (_prevNotes[y-1].isPlayed) _notes[y].count++;    // å·¦ä¸Šã®ã‚»ãƒ«ãŒONã®çŠ¶æ…‹ãªã‚‰countã‚’1å¢—ã‚„ã™  
                        if (_notes[y-1].isPlayed) _notes[y].count++;        // ä¸Šã®ã‚»ãƒ«ãŒONã®çŠ¶æ…‹ãªã‚‰countã‚’1å¢—ã‚„ã™
                        if (_nextNotes[y-1].isPlayed) _notes[y].count++;    // å³ä¸Šã®ã‚»ãƒ«ãŒONã®çŠ¶æ…‹ãªã‚‰countã‚’1å¢—ã‚„ã™
                    }
                    if (y != _notes.Length - 1) // ä¸€ç•ªä¸‹ã®è¡Œä»¥å¤–ã®ã‚»ãƒ«ãªã‚‰
                    {
                        if (_prevNotes[y+1].isPlayed) _notes[y].count++;    // å·¦ä¸‹ã®ã‚»ãƒ«ãŒONã®çŠ¶æ…‹ãªã‚‰countã‚’1å¢—ã‚„ã™
                        if (_notes[y+1].isPlayed) _notes[y].count++;        // ä¸‹ã®ã‚»ãƒ«ãŒONã®çŠ¶æ…‹ãªã‚‰countã‚’1å¢—ã‚„ã™
                        if (_nextNotes[y+1].isPlayed) _notes[y].count++;    // å³ä¸‹ã®ã‚»ãƒ«ãŒONã®çŠ¶æ…‹ãªã‚‰countã‚’1å¢—ã‚„ã™
                    }                                       
                }
            }
        }
    }
```
æœ€å¾Œã«ChangeLife()ã§ã¯ã€ã‚»ãƒ«ã”ã¨ã«countã®å€¤ã«åŸºã¥ã„ã¦ON/OFFã®çŠ¶æ…‹ã‚’æ±ºå®šã—ã¾ã™ã€‚
```csharp:LifeGameManager.cs
    private void ChangeLife()
    {
        for (int i = 0; i < beats.Length; i++)
        {
            NoteController[] _notes = beats[i].notes;

            for (int j = 0; j < _notes.Length; j++)
            {
                NoteController _note = _notes[j];

                // ã‚»ãƒ«ãŒå…ƒã€…OFFã®çŠ¶æ…‹ã‹ã¤å‘¨å›²ã«ã‚ã‚‹ONã®çŠ¶æ…‹ã®ã‚»ãƒ«ãŒ3ã¤ã®å ´åˆã€ONã®çŠ¶æ…‹ã«ã™ã‚‹
                if (!_note.isPlayed && _note.count == 3)
                {
                    _note.isPlayed =true;
                    _note.image.color = Color.white;
                }
                // ã‚»ãƒ«ãŒå…ƒã€…ONã®çŠ¶æ…‹ã‹ã¤å‘¨å›²ã«ã‚ã‚‹ONã®çŠ¶æ…‹ã®ã‚»ãƒ«ãŒ2ã¤ã§ã‚‚3ã¤ã§ã‚‚ãªã„å ´åˆã€OFFã®çŠ¶æ…‹ã«ã™ã‚‹
                else if (_note.isPlayed && _note.count !=2 && _note.count != 3)
                {
                    _note.isPlayed = false;
                    _note.image.color = Color.black;
                }

                // countã®å€¤ã‚’ãƒªã‚»ãƒƒãƒˆã™ã‚‹
                _note.count = 0;
            }
        }
    }
```

# ãŠã‚ã‚Šã«
Drum Life Gameã®ARãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚‚åˆ¶ä½œã—ã¾ã—ãŸã€‚ARã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€å…ƒã€…ã®ã‚¢ãƒ—ãƒªä½“é¨“ã‚’ç©ºé–“çš„ã«æ‹¡å¼µã—ã¦ã„ã¾ã™ã€‚
https://youtube.com/shorts/xgSqND1ucXU
### Drum Life Game AR
iOS ver.
@[card](https://apps.apple.com/app/drum-life-game-ar/id6449294573)
Android ver.
@[card](https://play.google.com/store/apps/details?id=com.ekito_station.DrumLifeGameAR)